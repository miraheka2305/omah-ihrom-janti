{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/src/admin/ManageProduct/ManageProduct.jsx\";\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n  display: block;\\n  width: 20px;\\n  height: 20px;\\n  cursor: pointer;\\n  margin: 10px auto;\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100px;\\n  height: 100px;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 550px;\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 5px;\\n  text-align: left;\\n  border: 1px solid black;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 5px;\\n  text-align: center;\\n  border: 1px solid black;\\n  border-collapse: collapse;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 20px auto;\\n  border-collapse: collapse;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  max-height: 658px;\\n  overflow-y: auto;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 130px;\\n  padding: 7px 5px;\\n  text-align: center;\\n  font-size: 14px;\\n  border: none;\\n  border-radius: 5px;\\n  color: white;\\n  cursor: pointer;\\n  background: #484848;\\n  margin: 0 20px;\\n  &:hover {\\n    background: #888888;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport EditIcon from \"../../assets/edit.svg\";\nimport DeleteIcon from \"../../assets/waste-bin.svg\";\nimport AddProduct from \"../AddProduct/AddProduct\";\nimport ModalConfirmation from \"../../components/ModalConfirmation/ModalConfirmation\";\n\nvar ManageProduct =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ManageProduct, _Component);\n\n  function ManageProduct(props) {\n    var _this;\n\n    _classCallCheck(this, ManageProduct);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ManageProduct).call(this, props));\n    _this.state = {\n      open: false,\n      openConfirm: false,\n      products: [],\n      item: {}\n    };\n    _this.openAddModal = _this.openAddModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.openEditModal = _this.openEditModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.openConfirmModal = _this.openConfirmModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDeleteProduct = _this.onDeleteProduct.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeConfirmModal = _this.closeConfirmModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ManageProduct, [{\n    key: \"getProductData\",\n    value: function getProductData() {\n      var options = {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json'\n        }\n      };\n      return fetch('http://localhost:8000/api/products', options).then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getProductData().then(function (response) {\n        var productsData = response.Data;\n        var products = [];\n\n        if (productsData !== null) {\n          productsData.forEach(function (product) {\n            products.push({\n              id: product.Id,\n              name: product.Name,\n              price: product.Price,\n              description: product.Description,\n              image: 'http://localhost:8000/api' + product.Images[0].Url\n            });\n          });\n        }\n\n        _this2.setState({\n          products: products\n        });\n      });\n    }\n  }, {\n    key: \"openAddModal\",\n    value: function openAddModal() {\n      this.setState({\n        open: true,\n        item: {\n          id: \"\",\n          name: \"\",\n          price: \"\",\n          desc: \"\",\n          image: \"\"\n        }\n      });\n    }\n  }, {\n    key: \"openEditModal\",\n    value: function openEditModal(product) {\n      this.setState({\n        open: true,\n        item: product\n      });\n    }\n  }, {\n    key: \"openConfirmModal\",\n    value: function openConfirmModal() {\n      this.setState({\n        openConfirm: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        open: false\n      });\n    }\n  }, {\n    key: \"closeConfirmModal\",\n    value: function closeConfirmModal() {\n      this.setState({\n        openConfirm: false\n      });\n    }\n  }, {\n    key: \"onDeleteProduct\",\n    value: function onDeleteProduct(product) {\n      var products = _toConsumableArray(this.state.products);\n\n      var idxProduct = products.indexOf(product);\n      console.log(idxProduct);\n\n      if (idxProduct !== -1) {\n        this.deleteProduct(product.id).then(function (response) {\n          console.log(\"response\", response);\n          console.log(\"response status\", response.Status);\n\n          if (response.Status === 1) {\n            console.log(\"\");\n            products.splice(idxProduct, 1);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"deleteProduct\",\n    value: function deleteProduct(id) {\n      var options = {\n        method: 'DELETE',\n        headers: {\n          'Authorization': sessionStorage.getItem(\"jwtToken\"),\n          'Accept': 'application/json, text/plain, */*'\n        }\n      };\n      return fetch('http://localhost:8000/api/products/' + id, options).then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"postProduct\",\n    value: function postProduct(newProduct) {\n      var formData = new FormData();\n      formData.append('file_uploads', newProduct.image);\n      formData.append('name', newProduct.name);\n      formData.append('price', newProduct.price);\n      formData.append('description', newProduct.desc);\n      var options = {\n        method: 'POST',\n        headers: {\n          'Authorization': sessionStorage.getItem(\"jwtToken\"),\n          'Accept': 'application/json, text/plain, */*'\n        },\n        body: formData\n      };\n      return fetch('http://localhost:8000/api/products', options).then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"updateProduct\",\n    value: function updateProduct(product) {\n      var formData = new FormData();\n      formData.append('file_uploads', product.image);\n      formData.append('name', product.name);\n      formData.append('price', product.price);\n      formData.append('description', product.desc);\n      console.log('http://localhost:8000/api/products/' + product.id);\n      console.log(sessionStorage.getItem(\"jwtToken\"));\n      var options = {\n        method: 'PUT',\n        headers: {\n          'Authorization': sessionStorage.getItem(\"jwtToken\"),\n          'Accept': 'application/json, text/plain, */*'\n        },\n        body: formData\n      };\n      return fetch('http://localhost:8000/api/products/' + product.id, options).then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(newItem) {\n      var _this3 = this;\n\n      var newArrProducts = this.state.products.slice();\n\n      if (newItem.id !== \"\") {\n        var indexProduct;\n\n        var products = _toConsumableArray(this.state.products);\n\n        indexProduct = products.findIndex(function (x) {\n          return x.id === newItem.id;\n        });\n        console.log(indexProduct);\n        this.updateProduct(newItem).then(function (response) {\n          console.log(response);\n          newItem.id = response.Data.Id;\n          newItem.image = 'http://localhost:8000/api' + response.Data.Images[0].Url;\n        }).then(function () {\n          newArrProducts[indexProduct] = newItem;\n        }).then(function () {\n          _this3.setState({\n            products: newArrProducts\n          });\n        }).then(function () {\n          _this3.closeModal();\n        });\n      } else {\n        this.postProduct(newItem).then(function (response) {\n          newItem.id = response.Data.Id;\n          newItem.image = 'http://localhost:8000/api' + response.Data.Images[0].Url;\n        }).then(function () {\n          newArrProducts.push(newItem);\n        }).then(function () {\n          _this3.setState({\n            products: newArrProducts\n          });\n        }).then(function () {\n          _this3.closeModal();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Manage Product\"), React.createElement(AddButton, {\n        onClick: this.openAddModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Add New Product\"), React.createElement(TableWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"No\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Product Name\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Product Price\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"Product Desc\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Product Image\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Manage Product\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, this.state.products.map(function (product, index) {\n        return React.createElement(\"tr\", {\n          key: product.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        }, React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227\n          },\n          __self: this\n        }, index + 1), React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, product.name), React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, product.price), React.createElement(DescColumn, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }, product.desc), React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        }, React.createElement(ProductImg, {\n          src: product.image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        })), React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, React.createElement(IconImg, {\n          src: EditIcon,\n          onClick: function onClick() {\n            _this4.openEditModal(product);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }), React.createElement(IconImg, {\n          src: DeleteIcon,\n          onClick: _this4.openConfirmModal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }), _this4.state.openConfirm ? React.createElement(ModalConfirmation, {\n          open: _this4.state.openConfirm,\n          onClose: _this4.closeConfirmModal,\n          product: product,\n          onDelete: function onDelete(product) {\n            return _this4.onDeleteProduct(product);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246\n          },\n          __self: this\n        }) : \"\"));\n      })))), this.state.open ? React.createElement(AddProduct, {\n        open: this.state.open,\n        item: this.state.item,\n        onClose: this.closeModal,\n        onSubmit: function onSubmit(newItem) {\n          return _this4.handleSubmit(newItem);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }) : \"\");\n    }\n  }]);\n\n  return ManageProduct;\n}(Component);\n\nexport { ManageProduct as default };\nvar Wrapper = styled.div(_templateObject());\nvar Title = styled.h1(_templateObject2());\nvar AddButton = styled.button(_templateObject3());\nvar TableWrapper = styled.div(_templateObject4());\nvar Table = styled.table(_templateObject5());\nvar HeadCell = styled.th(_templateObject6());\nvar BodyCell = styled.td(_templateObject7());\nvar DescColumn = styled(BodyCell)(_templateObject8());\nvar ProductImg = styled.img(_templateObject9());\nvar IconImg = styled.img(_templateObject10());","map":{"version":3,"sources":["/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/src/admin/ManageProduct/ManageProduct.jsx"],"names":["React","Component","styled","AddProduct","ModalConfirmation","ManageProduct","props","state","open","openConfirm","products","item","openAddModal","bind","openEditModal","openConfirmModal","onDeleteProduct","closeModal","closeConfirmModal","options","method","headers","fetch","then","response","json","getProductData","productsData","Data","forEach","product","push","id","Id","name","Name","price","Price","description","Description","image","Images","Url","setState","desc","idxProduct","indexOf","console","log","deleteProduct","Status","splice","sessionStorage","getItem","newProduct","formData","FormData","append","body","newItem","newArrProducts","slice","indexProduct","findIndex","x","updateProduct","postProduct","map","index","EditIcon","DeleteIcon","handleSubmit","Wrapper","div","Title","h1","AddButton","button","TableWrapper","Table","table","HeadCell","th","BodyCell","td","DescColumn","ProductImg","img","IconImg"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport EditIcon from \"../../assets/edit.svg\";\nimport DeleteIcon from \"../../assets/waste-bin.svg\";\nimport AddProduct from \"../AddProduct/AddProduct\";\nimport ModalConfirmation from \"../../components/ModalConfirmation/ModalConfirmation\";\n\nexport default class ManageProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      openConfirm: false,\n      products: [],\n      item: {}\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.openEditModal = this.openEditModal.bind(this);\n    this.openConfirmModal = this.openConfirmModal.bind(this);\n    this.onDeleteProduct = this.onDeleteProduct.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.closeConfirmModal = this.closeConfirmModal.bind(this);\n  }\n\n  getProductData() {\n    const options = {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    }\n    return fetch('http://localhost:8000/api/products', options)\n    .then(response => {\n      return response.json();\n    });\n  }\n\n  componentDidMount() {\n    this.getProductData().then(response => {\n      let productsData = response.Data;\n      let products = [];\n      if (productsData !== null) {\n        productsData.forEach( product => {\n          products.push({\n            id : product.Id,\n            name: product.Name,\n            price : product.Price,\n            description: product.Description,\n            image : 'http://localhost:8000/api' + product.Images[0].Url\n          });\n        })\n      }\n      this.setState({ \n        products : products\n      });\n    })\n  }\n\n  openAddModal() {\n    this.setState({\n      open: true,\n      item: {\n        id: \"\",\n        name: \"\",\n        price: \"\",\n        desc: \"\",\n        image: \"\"\n      }\n    });\n  }\n\n  openEditModal(product) {\n    this.setState({ open: true, item: product });\n  }\n\n  openConfirmModal() {\n    this.setState({\n      openConfirm: true\n    });\n  }\n\n  closeModal() {\n    this.setState({ open: false });\n  }\n\n  closeConfirmModal() {\n    this.setState({\n      openConfirm: false\n    });\n  }\n\n  onDeleteProduct(product) {\n    let products = [...this.state.products];\n    let idxProduct = products.indexOf(product);\n    console.log(idxProduct);\n    if (idxProduct !== -1) {\n      this.deleteProduct(product.id).then( response => {\n        console.log(\"response\", response);\n        console.log(\"response status\",response.Status);\n        if(response.Status === 1){\n          console.log(\"\");\n          products.splice(idxProduct, 1);\n        }\n      })\n      \n    }\n  }\n\n  deleteProduct(id){\n    const options = {\n      method: 'DELETE',\n      headers: {\n        'Authorization': sessionStorage.getItem(\"jwtToken\"), \n        'Accept': 'application/json, text/plain, */*',\n      },\n    }\n    return fetch('http://localhost:8000/api/products/' + id, options)\n    .then(response => {\n      return response.json();\n    });\n  }\n\n  postProduct(newProduct){\n\n    let formData = new FormData();\n    formData.append('file_uploads', newProduct.image);\n    formData.append('name', newProduct.name);\n    formData.append('price', newProduct.price);\n    formData.append('description', newProduct.desc);\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Authorization': sessionStorage.getItem(\"jwtToken\"), \n        'Accept': 'application/json, text/plain, */*',\n      },\n      body: formData\n    }\n    return fetch('http://localhost:8000/api/products', options)\n    .then(response => {\n      return response.json();\n    });\n  }\n\n  updateProduct(product){\n    let formData = new FormData();\n    formData.append('file_uploads', product.image);\n    formData.append('name', product.name);\n    formData.append('price', product.price);\n    formData.append('description', product.desc);\n    console.log('http://localhost:8000/api/products/' + product.id );\n    console.log(sessionStorage.getItem(\"jwtToken\")); \n    const options = {\n      method: 'PUT',\n      headers: {\n        'Authorization': sessionStorage.getItem(\"jwtToken\"), \n        'Accept': 'application/json, text/plain, */*',\n      },\n      body: formData\n    }\n    return fetch('http://localhost:8000/api/products/' + product.id , options)\n    .then(response => {\n      return response.json();\n    });\n  }\n\n  handleSubmit(newItem) {\n\n    const newArrProducts = this.state.products.slice();\n    if(newItem.id !== \"\"){\n      let indexProduct;\n      let products = [...this.state.products];\n      indexProduct = products.findIndex(x => x.id === newItem.id);\n\n      console.log(indexProduct);\n      this.updateProduct(newItem).then( response => {\n        console.log(response);\n        newItem.id = response.Data.Id;\n        newItem.image = 'http://localhost:8000/api' + response.Data.Images[0].Url;\n      }).then( () => {\n        newArrProducts[indexProduct] = newItem;\n      }).then( () => {\n        this.setState({\n          products: newArrProducts\n        });\n      }).then(() => {\n        this.closeModal();\n      })\n    }else{\n      this.postProduct(newItem).then( response => {\n        newItem.id = response.Data.Id;\n        newItem.image = 'http://localhost:8000/api' + response.Data.Images[0].Url;\n      }).then( () => {\n        newArrProducts.push(newItem);\n      }).then( () => {\n        this.setState({\n          products: newArrProducts\n        });\n      }).then(() => {\n        this.closeModal();\n      })\n    }\n  }\n\n  render() {\n    return (\n      <Wrapper>\n        <Title>Manage Product</Title>\n        <AddButton onClick={this.openAddModal}>Add New Product</AddButton>\n        <TableWrapper>\n          <Table>\n            <thead>\n              <tr>\n                <HeadCell>No</HeadCell>\n                <HeadCell>Product Name</HeadCell>\n                <HeadCell>Product Price</HeadCell>\n                <HeadCell>Product Desc</HeadCell>\n                <HeadCell>Product Image</HeadCell>\n                <HeadCell>Manage Product</HeadCell>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.products.map((product, index) => {\n                return (\n                  <tr key={product.id}>\n                    <BodyCell>{index + 1}</BodyCell>\n                    <BodyCell>{product.name}</BodyCell>\n                    <BodyCell>{product.price}</BodyCell>\n                    <DescColumn>{product.desc}</DescColumn>\n                    <BodyCell>\n                      <ProductImg src={product.image} />\n                    </BodyCell>\n                    <BodyCell>\n                      <IconImg\n                        src={EditIcon}\n                        onClick={() => {\n                          this.openEditModal(product);\n                        }}\n                      />\n                      <IconImg\n                        src={DeleteIcon}\n                        onClick={this.openConfirmModal}\n                      />\n                      {this.state.openConfirm ? (\n                        <ModalConfirmation\n                          open={this.state.openConfirm}\n                          onClose={this.closeConfirmModal}\n                          product={product}\n                          onDelete={product => this.onDeleteProduct(product)}\n                        />\n                      ) : (\n                        \"\"\n                      )}\n                    </BodyCell>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n        </TableWrapper>\n        {this.state.open ? (\n          <AddProduct\n            open={this.state.open}\n            item={this.state.item}\n            onClose={this.closeModal}\n            onSubmit={newItem => this.handleSubmit(newItem)}\n          />\n        ) : (\n          \"\"\n        )}\n      </Wrapper>\n    );\n  }\n}\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nconst Title = styled.h1`\n  text-align: center;\n`;\n\nconst AddButton = styled.button`\n  width: 130px;\n  padding: 7px 5px;\n  text-align: center;\n  font-size: 14px;\n  border: none;\n  border-radius: 5px;\n  color: white;\n  cursor: pointer;\n  background: #484848;\n  margin: 0 20px;\n  &:hover {\n    background: #888888;\n  }\n`;\n\nconst TableWrapper = styled.div`\n  max-height: 658px;\n  overflow-y: auto;\n`;\nconst Table = styled.table`\n  margin: 20px auto;\n  border-collapse: collapse;\n`;\n\nconst HeadCell = styled.th`\n  padding: 5px;\n  text-align: center;\n  border: 1px solid black;\n  border-collapse: collapse;\n`;\nconst BodyCell = styled.td`\n  padding: 5px;\n  text-align: left;\n  border: 1px solid black;\n`;\nconst DescColumn = styled(BodyCell)`\n  width: 550px;\n`;\nconst ProductImg = styled.img`\n  width: 100px;\n  height: 100px;\n`;\n\nconst IconImg = styled.img`\n  display: block;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  margin: 10px auto;\n`;\n"]},"metadata":{},"sourceType":"module"}