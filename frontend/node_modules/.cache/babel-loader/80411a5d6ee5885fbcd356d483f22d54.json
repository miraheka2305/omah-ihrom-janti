{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _classCallCheck from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/src/admin/AddProduct/AddProduct.jsx\";\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\n  background: #a8a8a8;\\n  color: white;\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 16px;\\n  width: 100px;\\n  height: 40px;\\n  padding: 5px;\\n  border-radius: 5px;\\n  margin: 20px;\\n  cursor: pointer;\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 280px;\\n  margin: 0 auto;\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n  height: 100%;\\n  width: 100%;\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: center;\\n  margin: 5px 0;\\n  height: 200px;\\n  width: 200px;\\n  border: 1px solid gray;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 15px;\\n  width: 300px;\\n  height: 70px;\\n  resize: none;\\n  border-radius: 5px;\\n  padding: 5px;\\n  border: \", \";\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 15px;\\n  width: 300px;\\n  padding: 5px;\\n  border-radius: 5px;\\n  border: \", \";\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  display: inline-block;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  color: \", \";\\n  margin-top: 0;\\n  margin-bottom: 5px;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 18px;\\n  width: 200px;\\n  display: inline-block;\\n  vertical-align: top;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 10px 0;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 30px;\\n  text-align: center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 20px 30px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Popup from \"reactjs-popup\";\nimport { Formik } from \"formik\";\n\nvar AddProduct =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddProduct, _Component);\n\n  function AddProduct(props) {\n    var _this;\n\n    _classCallCheck(this, AddProduct);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddProduct).call(this, props));\n    _this.state = {\n      file: \"\",\n      imagePreviewURL: \"\",\n      open: true,\n      item: {\n        id: 0,\n        name: \"\",\n        price: \"\",\n        desc: \"\",\n        image: \"\"\n      },\n      isNewImage: false\n    };\n    _this.baseState = _this.state;\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleImageChange = _this.handleImageChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCancel = _this.handleCancel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AddProduct, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        imagePreviewURL: this.props.item.image,\n        item: this.props.item\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      var item = Object.assign({}, this.state.item);\n      item[e.target.name] = e.target.value;\n      this.setState({\n        item: item\n      });\n    }\n  }, {\n    key: \"handleImageChange\",\n    value: function handleImageChange(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var reader = new FileReader();\n      var item = Object.assign({}, this.state.item);\n      var file = e.target.files[0];\n\n      reader.onloadend = function () {\n        item.image = reader.result;\n        item.image = file;\n\n        _this2.setState({\n          file: file,\n          imagePreviewURL: reader.result,\n          item: item,\n          isNewImage: true\n        });\n      };\n\n      reader.readAsDataURL(file);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage() {\n      return fetch(this.state.imagePreviewURL).then(function (res) {\n        return res.blob();\n      });\n    }\n  }, {\n    key: \"convertBlobToFile\",\n    value: function convertBlobToFile(theBlob, fileName) {\n      //A Blob() is almost a File() - it's just missing the two properties below which we will add\n      theBlob.lastModifiedDate = new Date();\n      theBlob.name = fileName;\n      return theBlob;\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n\n      if (this.state.item.name === \"\" || this.state.item.price === \"\" || this.state.item.desc === \"\" || this.state.item.image === \"\") {\n        return;\n      }\n\n      if (this.state.isNewImage === false) {\n        var image;\n        var item = Object.assign({}, this.state.item);\n        this.getImage().then(function (blob) {\n          // console.log(blob);\n          var splitUrl = _this3.state.imagePreviewURL.split('/');\n\n          fileName = splitUrl[splitUrl.length - 1];\n          convertBlobToFile(blob, _this3.state.imagePreviewURL);\n          item.image = blob;\n\n          _this3.setState({\n            item: item\n          });\n\n          _this3.props.onSubmit(_this3.state.item);\n        });\n      } else {\n        this.props.onSubmit(this.state.item);\n      }\n    }\n  }, {\n    key: \"handleCancel\",\n    value: function handleCancel() {\n      this.setState(this.baseState);\n      this.props.onClose();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          imagePreviewURL = _this$state.imagePreviewURL,\n          item = _this$state.item;\n      return React.createElement(Popup, {\n        open: this.props.open,\n        closeOnDocumentClick: true,\n        onClose: this.props.onClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Manage Your Product\"), React.createElement(Formik, {\n        validate: function validate() {\n          var errors = {};\n\n          if (!_this4.state.item.name) {\n            errors.name = \"Product's name is required\";\n          }\n\n          if (!_this4.state.item.price) {\n            errors.price = \"Product's price is required\";\n          }\n\n          if (!_this4.state.item.desc) {\n            errors.desc = \"Product's description is required\";\n          }\n\n          return errors;\n        },\n        render: function render(_ref) {\n          var touched = _ref.touched,\n              errors = _ref.errors,\n              handleBlur = _ref.handleBlur;\n          return React.createElement(\"form\", {\n            onSubmit: function onSubmit(e) {\n              return _this4.handleSubmit(e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, React.createElement(FormWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127\n            },\n            __self: this\n          }, React.createElement(Label, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }, \"Product Name\"), React.createElement(InputWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129\n            },\n            __self: this\n          }, React.createElement(Input, {\n            type: \"text\",\n            name: \"name\",\n            border: touched.name && errors.name && \"1px solid red\",\n            placeholder: \"Write your product name\",\n            value: item.name,\n            onChange: function onChange(e) {\n              return _this4.handleChange(e);\n            },\n            onBlur: handleBlur,\n            required: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }), touched.name && errors.name && React.createElement(Text, {\n            color: \"red\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141\n            },\n            __self: this\n          }, errors.name))), React.createElement(FormWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145\n            },\n            __self: this\n          }, React.createElement(Label, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 146\n            },\n            __self: this\n          }, \"Product Price\"), React.createElement(InputWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147\n            },\n            __self: this\n          }, React.createElement(Input, {\n            type: \"text\",\n            name: \"price\",\n            border: touched.price && errors.price && \"1px solid red\",\n            placeholder: \"Write your product price\",\n            value: item.price,\n            onChange: function onChange(e) {\n              return _this4.handleChange(e);\n            },\n            onBlur: handleBlur,\n            required: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          }), touched.price && errors.price && React.createElement(Text, {\n            color: \"red\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, errors.price), \" \")), React.createElement(FormWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163\n            },\n            __self: this\n          }, React.createElement(Label, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 164\n            },\n            __self: this\n          }, \"Product Description\"), React.createElement(InputWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 165\n            },\n            __self: this\n          }, React.createElement(InputDesc, {\n            type: \"text\",\n            name: \"desc\",\n            border: touched.desc && errors.desc && \"1px solid red\",\n            placeholder: \"Write your product description\",\n            value: item.desc,\n            onChange: function onChange(e) {\n              return _this4.handleChange(e);\n            },\n            onBlur: handleBlur,\n            required: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 166\n            },\n            __self: this\n          }), touched.desc && errors.desc && React.createElement(Text, {\n            color: \"red\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177\n            },\n            __self: this\n          }, errors.desc))), React.createElement(FormWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          }, React.createElement(Label, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182\n            },\n            __self: this\n          }, \"Product Photo\"), React.createElement(InputWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183\n            },\n            __self: this\n          }, React.createElement(Input, {\n            type: \"file\",\n            name: \"image\",\n            onChange: function onChange(e) {\n              return _this4.handleImageChange(e);\n            },\n            onBlur: handleBlur,\n            required: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 184\n            },\n            __self: this\n          }), React.createElement(ImagePreviewWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192\n            },\n            __self: this\n          }, imagePreviewURL ? React.createElement(ImagePreview, {\n            src: imagePreviewURL,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          }) : React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }, \"Please select an Image for Preview\")))), React.createElement(ButtonWrapper, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201\n            },\n            __self: this\n          }, React.createElement(Button, {\n            type: \"submit\",\n            onClick: function onClick(e) {\n              return _this4.handleSubmit(e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202\n            },\n            __self: this\n          }, \"Submit\"), React.createElement(ButtonCancel, {\n            onClick: _this4.handleCancel,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            },\n            __self: this\n          }, \"Cancel\")));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return AddProduct;\n}(Component);\n\nexport { AddProduct as default };\nvar Wrapper = styled.div(_templateObject());\nvar Title = styled.h1(_templateObject2());\nvar FormWrapper = styled.div(_templateObject3());\nvar Label = styled.div(_templateObject4());\nvar Text = styled.p(_templateObject5(), function (props) {\n  return props.color || \"#4d4d4d\";\n});\nvar InputWrapper = styled.div(_templateObject6());\nvar Input = styled.input(_templateObject7(), function (props) {\n  return props.border || \"1px solid #d6d6d6\";\n});\nvar InputDesc = styled.textarea(_templateObject8(), function (props) {\n  return props.border || \"1px solid #d6d6d6\";\n});\nvar ImagePreviewWrapper = styled.div(_templateObject9());\nvar ImagePreview = styled.img(_templateObject10());\nvar ButtonWrapper = styled.div(_templateObject11());\nvar Button = styled.button(_templateObject12());\nvar ButtonCancel = styled(Button)(_templateObject13());","map":{"version":3,"sources":["/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/src/admin/AddProduct/AddProduct.jsx"],"names":["React","Component","styled","Popup","Formik","AddProduct","props","state","file","imagePreviewURL","open","item","id","name","price","desc","image","isNewImage","baseState","handleChange","bind","handleImageChange","handleSubmit","handleCancel","setState","e","Object","assign","target","value","preventDefault","reader","FileReader","files","onloadend","result","readAsDataURL","fetch","then","res","blob","theBlob","fileName","lastModifiedDate","Date","getImage","splitUrl","split","length","convertBlobToFile","onSubmit","onClose","errors","touched","handleBlur","Wrapper","div","Title","h1","FormWrapper","Label","Text","p","color","InputWrapper","Input","input","border","InputDesc","textarea","ImagePreviewWrapper","ImagePreview","img","ButtonWrapper","Button","button","ButtonCancel"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Popup from \"reactjs-popup\";\nimport { Formik } from \"formik\";\n\nexport default class AddProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: \"\",\n      imagePreviewURL: \"\",\n      open: true,\n      item: { id: 0, name: \"\", price: \"\", desc: \"\", image: \"\" },\n      isNewImage : false\n    };\n    this.baseState = this.state;\n    this.handleChange = this.handleChange.bind(this);\n    this.handleImageChange = this.handleImageChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n  componentDidMount() {\n    this.setState({\n      imagePreviewURL: this.props.item.image,\n      item: this.props.item\n    });\n  }\n\n  handleChange(e) {\n    let item = Object.assign({}, this.state.item);\n    item[e.target.name] = e.target.value;\n    this.setState({\n      item: item\n    });\n  }\n\n  handleImageChange(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let item = Object.assign({}, this.state.item);\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      item.image = reader.result;\n      item.image = file;\n      this.setState({ file: file, imagePreviewURL: reader.result, item: item, isNewImage:true });\n      \n    };\n    reader.readAsDataURL(file);\n  }\n  \n  getImage(){\n    return fetch(this.state.imagePreviewURL)\n        .then(res => {\n          return res.blob();\n        });\n  }\n\n  convertBlobToFile(theBlob, fileName){\n      //A Blob() is almost a File() - it's just missing the two properties below which we will add\n      theBlob.lastModifiedDate = new Date();\n      theBlob.name = fileName;\n      return theBlob;\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    if (\n      this.state.item.name === \"\" ||\n      this.state.item.price === \"\" ||\n      this.state.item.desc === \"\" ||\n      this.state.item.image === \"\"\n    ) {\n      return;\n    }\n    if(this.state.isNewImage === false){\n      let image;\n      let item = Object.assign({}, this.state.item);\n  \n      this.getImage().then(blob => {\n        // console.log(blob);\n        let splitUrl = this.state.imagePreviewURL.split('/')\n        fileName = splitUrl[splitUrl.length-1];\n\n        convertBlobToFile(blob, this.state.imagePreviewURL)\n        item.image = blob;\n        this.setState({item : item});\n        this.props.onSubmit(this.state.item);\n      });\n    }else{\n      this.props.onSubmit(this.state.item);\n    }\n    \n  }\n\n  handleCancel() {\n    this.setState(this.baseState);\n    this.props.onClose();\n  }\n\n  render() {\n    const { imagePreviewURL, item } = this.state;\n    return (\n      <Popup\n        open={this.props.open}\n        closeOnDocumentClick\n        onClose={this.props.onClose}\n      >\n        <Wrapper>\n          <Title>Manage Your Product</Title>\n          <Formik\n            validate={() => {\n              let errors = {};\n              if (!this.state.item.name) {\n                errors.name = \"Product's name is required\";\n              }\n              if (!this.state.item.price) {\n                errors.price = \"Product's price is required\";\n              }\n              if (!this.state.item.desc) {\n                errors.desc = \"Product's description is required\";\n              }\n              return errors;\n            }}\n            render={({ touched, errors, handleBlur }) => (\n              <form onSubmit={e => this.handleSubmit(e)}>\n                <FormWrapper>\n                  <Label>Product Name</Label>\n                  <InputWrapper>\n                    <Input\n                      type=\"text\"\n                      name=\"name\"\n                      border={touched.name && errors.name && \"1px solid red\"}\n                      placeholder=\"Write your product name\"\n                      value={item.name}\n                      onChange={e => this.handleChange(e)}\n                      onBlur={handleBlur}\n                      required={true}\n                    />\n                    {touched.name && errors.name && (\n                      <Text color=\"red\">{errors.name}</Text>\n                    )}\n                  </InputWrapper>\n                </FormWrapper>\n                <FormWrapper>\n                  <Label>Product Price</Label>\n                  <InputWrapper>\n                    <Input\n                      type=\"text\"\n                      name=\"price\"\n                      border={touched.price && errors.price && \"1px solid red\"}\n                      placeholder=\"Write your product price\"\n                      value={item.price}\n                      onChange={e => this.handleChange(e)}\n                      onBlur={handleBlur}\n                      required={true}\n                    />\n                    {touched.price && errors.price && (\n                      <Text color=\"red\">{errors.price}</Text>\n                    )}{\" \"}\n                  </InputWrapper>\n                </FormWrapper>\n                <FormWrapper>\n                  <Label>Product Description</Label>\n                  <InputWrapper>\n                    <InputDesc\n                      type=\"text\"\n                      name=\"desc\"\n                      border={touched.desc && errors.desc && \"1px solid red\"}\n                      placeholder=\"Write your product description\"\n                      value={item.desc}\n                      onChange={e => this.handleChange(e)}\n                      onBlur={handleBlur}\n                      required={true}\n                    />\n                    {touched.desc && errors.desc && (\n                      <Text color=\"red\">{errors.desc}</Text>\n                    )}\n                  </InputWrapper>\n                </FormWrapper>\n                <FormWrapper>\n                  <Label>Product Photo</Label>\n                  <InputWrapper>\n                    <Input\n                      type=\"file\"\n                      name=\"image\"\n                      onChange={e => this.handleImageChange(e)}\n                      onBlur={handleBlur}\n                      required={true}\n                    />\n\n                    <ImagePreviewWrapper>\n                      {imagePreviewURL ? (\n                        <ImagePreview src={imagePreviewURL} />\n                      ) : (\n                        <p>Please select an Image for Preview</p>\n                      )}\n                    </ImagePreviewWrapper>\n                  </InputWrapper>\n                </FormWrapper>\n                <ButtonWrapper>\n                  <Button type=\"submit\" onClick={e => this.handleSubmit(e)}>\n                    Submit\n                  </Button>\n                  <ButtonCancel onClick={this.handleCancel}>\n                    Cancel\n                  </ButtonCancel>\n                </ButtonWrapper>\n              </form>\n            )}\n          />\n        </Wrapper>\n      </Popup>\n    );\n  }\n}\n\nconst Wrapper = styled.div`\n  padding: 20px 30px;\n`;\nconst Title = styled.h1`\n  font-size: 30px;\n  text-align: center;\n`;\n\nconst FormWrapper = styled.div`\n  margin: 10px 0;\n`;\n\nconst Label = styled.div`\n  font-size: 18px;\n  width: 200px;\n  display: inline-block;\n  vertical-align: top;\n`;\n\nconst Text = styled.p`\n  color: ${props => props.color || \"#4d4d4d\"};\n  margin-top: 0;\n  margin-bottom: 5px;\n`;\n\nconst InputWrapper = styled.div`\n  display: inline-block;\n`;\n\nconst Input = styled.input`\n  font-size: 15px;\n  width: 300px;\n  padding: 5px;\n  border-radius: 5px;\n  border: ${props => props.border || \"1px solid #d6d6d6\"};\n`;\n\nconst InputDesc = styled.textarea`\n  font-size: 15px;\n  width: 300px;\n  height: 70px;\n  resize: none;\n  border-radius: 5px;\n  padding: 5px;\n  border: ${props => props.border || \"1px solid #d6d6d6\"};\n`;\n\nconst ImagePreviewWrapper = styled.div`\n  text-align: center;\n  margin: 5px 0;\n  height: 200px;\n  width: 200px;\n  border: 1px solid gray;\n`;\nconst ImagePreview = styled.img`\n  height: 100%;\n  width: 100%;\n`;\nconst ButtonWrapper = styled.div`\n  width: 280px;\n  margin: 0 auto;\n`;\nconst Button = styled.button`\n  font-size: 16px;\n  width: 100px;\n  height: 40px;\n  padding: 5px;\n  border-radius: 5px;\n  margin: 20px;\n  cursor: pointer;\n`;\n\nconst ButtonCancel = styled(Button)`\n  background: #a8a8a8;\n  color: white;\n`;\n"]},"metadata":{},"sourceType":"module"}