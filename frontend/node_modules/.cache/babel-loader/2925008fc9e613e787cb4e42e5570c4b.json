{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/src/admin/ManageProduct/ManageProduct.jsx\";\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n  display: block;\\n  width: 20px;\\n  height: 20px;\\n  cursor: pointer;\\n  margin: 10px auto;\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100px;\\n  height: 100px;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 550px;\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 5px;\\n  text-align: left;\\n  border: 1px solid black;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 5px;\\n  text-align: center;\\n  border: 1px solid black;\\n  border-collapse: collapse;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 20px auto;\\n  border-collapse: collapse;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  max-height: 658px;\\n  overflow-y: auto;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 130px;\\n  padding: 7px 5px;\\n  text-align: center;\\n  font-size: 14px;\\n  border: none;\\n  border-radius: 5px;\\n  color: white;\\n  cursor: pointer;\\n  background: #484848;\\n  margin: 0 20px;\\n  &:hover {\\n    background: #888888;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport EditIcon from \"../../assets/edit.svg\";\nimport DeleteIcon from \"../../assets/waste-bin.svg\";\nimport AddProduct from \"../AddProduct/AddProduct\";\nimport ModalConfirmation from \"../../components/ModalConfirmation/ModalConfirmation\";\n\nvar ManageProduct =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ManageProduct, _Component);\n\n  function ManageProduct(props) {\n    var _this;\n\n    _classCallCheck(this, ManageProduct);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ManageProduct).call(this, props));\n\n    _this.myCallback = function (dataFromChild) {\n      [];\n    };\n\n    _this.state = {\n      open: false,\n      openConfirm: false,\n      products: []\n    };\n    _this.openAddModal = _this.openAddModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.openEditModal = _this.openEditModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.openConfirmModal = _this.openConfirmModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDeleteProduct = _this.onDeleteProduct.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeConfirmModal = _this.closeConfirmModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ManageProduct, [{\n    key: \"getProductData\",\n    value: function getProductData() {\n      var options = {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json'\n        }\n      };\n      return fetch('http://localhost:8000/api/products', options).then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getProductData().then(function (response) {\n        var productsData = response.Data;\n        var products = [];\n\n        if (productsData.length > 0) {\n          productsData.forEach(function (product) {\n            products.push({\n              id: product.Id,\n              name: product.Name,\n              price: product.Price,\n              description: product.Description,\n              image: 'http://localhost:8000/api' + product.Images[0].Url\n            });\n          });\n        }\n\n        _this2.setState({\n          products: products\n        });\n      });\n    }\n  }, {\n    key: \"openAddModal\",\n    value: function openAddModal() {\n      // let id = this.state.products.length + 1;\n      this.setState({\n        open: true,\n        item: {\n          id: \"\",\n          name: \"\",\n          price: \"\",\n          desc: \"\",\n          image: \"\"\n        }\n      });\n    }\n  }, {\n    key: \"openEditModal\",\n    value: function openEditModal(product) {\n      this.setState({\n        open: true,\n        item: product\n      });\n    }\n  }, {\n    key: \"openConfirmModal\",\n    value: function openConfirmModal() {\n      this.setState({\n        openConfirm: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        open: false\n      });\n    }\n  }, {\n    key: \"closeConfirmModal\",\n    value: function closeConfirmModal() {\n      this.setState({\n        openConfirm: false\n      });\n    }\n  }, {\n    key: \"onDeleteProduct\",\n    value: function onDeleteProduct(product) {\n      var products = _toConsumableArray(this.state.products);\n\n      var idxProduct = products.indexOf(product);\n\n      if (idxProduct !== -1) {\n        products.splice(idxProduct, 1);\n        this.setState({\n          products: products,\n          openConfirm: false\n        });\n      }\n    }\n  }, {\n    key: \"postProduct\",\n    value: function postProduct(newProduct) {\n      var productData = {\n        name: newProduct.name,\n        price: newProduct.price,\n        desc: newProduct.desc,\n        image: newProduct.image // const files = Array.from(e.target.files)\n\n      };\n      var formData = new FormData();\n      var options = {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json, text/plain, */*'\n        },\n        body: JSON.stringify(productData)\n      };\n      return fetch('http://localhost:8000/api/products', options).then(function (response) {\n        console.log(response);\n        console.log(response.json());\n        return response.json();\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(newItem) {\n      var _this3 = this;\n\n      // console.log(this.state);\n      // console.log(newItem);\n      // var indexProduct = this.state.products.findIndex(function(item) {\n      //   return item.id === newItem.id;\n      // });\n      var indexProduct;\n      var newArrProducts = this.state.products.slice();\n      this.postProduct(newItem).then(function (response) {\n        console.log('response', response);\n        indexProduct = response.Id;\n        newItem.id = response.Id;\n      }).then(function () {\n        newArrProducts.push(newItem);\n      }).then(function () {\n        _this3.setState({\n          products: newArrProducts\n        });\n      }).then(function () {\n        _this3.closeModal();\n      }); // const newArrProducts = this.state.products.slice();\n      // if (indexProduct !== -1) {\n      //   newArrProducts[indexProduct] = newItem;\n      // } else {\n      //   newArrProducts.push(newItem);\n      //   console.log(newArrProducts);\n      // }\n      // this.setState({\n      //   products: newArrProducts\n      // });\n      // this.closeModal();\n      // // console.log(indexProduct);\n      // const newArrProducts = this.state.products.slice();\n      // if (indexProduct !== -1) {\n      //   newArrProducts[indexProduct] = newItem;\n      // } else {\n      //   newArrProducts.push(newItem);\n      //   console.log(newArrProducts);\n      // }\n      // this.setState({\n      //   products: newArrProducts\n      // });\n      // this.closeModal();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(ToDoItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Manage Product\"), React.createElement(AddButton, {\n        onClick: this.openAddModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Add New Product\"), React.createElement(TableWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"No\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Product Name\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Product Price\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Product Desc\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Product Image\"), React.createElement(HeadCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Manage Product\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, this.state.products.map(function (product, index) {\n        return React.createElement(\"tr\", {\n          key: product.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, index + 1), React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, product.name), React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, product.price), React.createElement(DescColumn, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, product.desc), React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, React.createElement(ProductImg, {\n          src: product.image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        })), React.createElement(BodyCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }, React.createElement(IconImg, {\n          src: EditIcon,\n          onClick: function onClick() {\n            _this4.openEditModal(product);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }), React.createElement(IconImg, {\n          src: DeleteIcon,\n          onClick: _this4.openConfirmModal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }), _this4.state.openConfirm ? React.createElement(ModalConfirmation, {\n          open: _this4.state.openConfirm,\n          onClose: _this4.closeConfirmModal,\n          product: product,\n          onDelete: function onDelete(product) {\n            return _this4.onDeleteProduct(product);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }) : \"\"));\n      })))), this.state.open ? React.createElement(AddProduct, {\n        open: this.state.open,\n        item: this.state.item,\n        onClose: this.closeModal,\n        onSubmit: function onSubmit(newItem) {\n          return _this4.handleSubmit(newItem);\n        },\n        callbackFromParent: this.myCallback,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }) : \"\");\n    }\n  }]);\n\n  return ManageProduct;\n}(Component);\n\nexport { ManageProduct as default };\nvar Wrapper = styled.div(_templateObject());\nvar Title = styled.h1(_templateObject2());\nvar AddButton = styled.button(_templateObject3());\nvar TableWrapper = styled.div(_templateObject4());\nvar Table = styled.table(_templateObject5());\nvar HeadCell = styled.th(_templateObject6());\nvar BodyCell = styled.td(_templateObject7());\nvar DescColumn = styled(BodyCell)(_templateObject8());\nvar ProductImg = styled.img(_templateObject9());\nvar IconImg = styled.img(_templateObject10());","map":{"version":3,"sources":["/Users/m.adhisatria/Documents/Project/omah-ihrom-janti/frontend/src/admin/ManageProduct/ManageProduct.jsx"],"names":["React","Component","styled","AddProduct","ModalConfirmation","ManageProduct","props","myCallback","dataFromChild","state","open","openConfirm","products","openAddModal","bind","openEditModal","openConfirmModal","onDeleteProduct","closeModal","closeConfirmModal","options","method","headers","fetch","then","response","json","getProductData","productsData","Data","length","forEach","product","push","id","Id","name","Name","price","Price","description","Description","image","Images","Url","setState","item","desc","idxProduct","indexOf","splice","newProduct","productData","formData","FormData","body","JSON","stringify","console","log","newItem","indexProduct","newArrProducts","slice","postProduct","map","index","EditIcon","DeleteIcon","handleSubmit","Wrapper","div","Title","h1","AddButton","button","TableWrapper","Table","table","HeadCell","th","BodyCell","td","DescColumn","ProductImg","img","IconImg"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport EditIcon from \"../../assets/edit.svg\";\nimport DeleteIcon from \"../../assets/waste-bin.svg\";\nimport AddProduct from \"../AddProduct/AddProduct\";\nimport ModalConfirmation from \"../../components/ModalConfirmation/ModalConfirmation\";\n\nexport default class ManageProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      openConfirm: false,\n      products: [\n      ],\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.openEditModal = this.openEditModal.bind(this);\n    this.openConfirmModal = this.openConfirmModal.bind(this);\n    this.onDeleteProduct = this.onDeleteProduct.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.closeConfirmModal = this.closeConfirmModal.bind(this);\n  }\n\n  getProductData() {\n    const options = {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json',\n      },\n    }\n    return fetch('http://localhost:8000/api/products', options)\n    .then(response => {\n      return response.json();\n    });\n  }\n\n  componentDidMount() {\n    this.getProductData().then(response => {\n      let productsData = response.Data;\n      let products = [];\n      if (productsData.length > 0) {\n        productsData.forEach( product => {\n          products.push({\n            id : product.Id,\n            name: product.Name,\n            price : product.Price,\n            description: product.Description,\n            image : 'http://localhost:8000/api' + product.Images[0].Url\n          });\n        })\n      }\n      this.setState({ \n        products : products\n      });\n    })\n  }\n\n  openAddModal() {\n    // let id = this.state.products.length + 1;\n    this.setState({\n      open: true,\n      item: {\n        id: \"\",\n        name: \"\",\n        price: \"\",\n        desc: \"\",\n        image: \"\"\n      }\n    });\n  }\n\n  openEditModal(product) {\n    this.setState({ open: true, item: product });\n  }\n\n  openConfirmModal() {\n    this.setState({\n      openConfirm: true\n    });\n  }\n\n  closeModal() {\n    this.setState({ open: false });\n  }\n\n  closeConfirmModal() {\n    this.setState({\n      openConfirm: false\n    });\n  }\n\n  onDeleteProduct(product) {\n    let products = [...this.state.products];\n    let idxProduct = products.indexOf(product);\n    if (idxProduct !== -1) {\n      products.splice(idxProduct, 1);\n      this.setState({\n        products: products,\n        openConfirm: false\n      });\n    }\n  }\n\n  postProduct(newProduct){\n    let productData = {\n      name: newProduct.name,\n      price: newProduct.price,\n      desc: newProduct.desc,\n      image: newProduct.image\n    }\n    // const files = Array.from(e.target.files)\n\n    const formData = new FormData()\n\n    const options = {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json, text/plain, */*',\n      },\n      body: JSON.stringify(productData)\n    }\n    return fetch('http://localhost:8000/api/products', options)\n    .then(response => {\n      console.log(response);\n      console.log(response.json());\n      return response.json();\n    });\n  }\n\n  handleSubmit(newItem) {\n    // console.log(this.state);\n    // console.log(newItem);\n    // var indexProduct = this.state.products.findIndex(function(item) {\n    //   return item.id === newItem.id;\n    // });\n    let indexProduct;\n    const newArrProducts = this.state.products.slice();\n    this.postProduct(newItem).then( response => {\n      console.log('response',response);\n       indexProduct = response.Id;\n       newItem.id = response.Id;\n    }).then( () => {\n      newArrProducts.push(newItem);\n    }).then( () => {\n      this.setState({\n        products: newArrProducts\n      });\n    }).then(() => {\n      this.closeModal();\n    })\n\n    // const newArrProducts = this.state.products.slice();\n    // if (indexProduct !== -1) {\n    //   newArrProducts[indexProduct] = newItem;\n    // } else {\n    //   newArrProducts.push(newItem);\n    //   console.log(newArrProducts);\n    // }\n    // this.setState({\n    //   products: newArrProducts\n    // });\n    // this.closeModal();\n\n\n\n    // // console.log(indexProduct);\n    // const newArrProducts = this.state.products.slice();\n    // if (indexProduct !== -1) {\n    //   newArrProducts[indexProduct] = newItem;\n    // } else {\n    //   newArrProducts.push(newItem);\n    //   console.log(newArrProducts);\n    // }\n    // this.setState({\n    //   products: newArrProducts\n    // });\n    // this.closeModal();\n  }\n\n  myCallback = (dataFromChild) => {\n    []\n  }\n    render() {\n        return (\n            <div>\n                <ToDoItem />\n            </div>\n        );\n    }\n\n\n  render() {\n    return (\n      <Wrapper>\n        <Title>Manage Product</Title>\n        <AddButton onClick={this.openAddModal}>Add New Product</AddButton>\n        <TableWrapper>\n          <Table>\n            <thead>\n              <tr>\n                <HeadCell>No</HeadCell>\n                <HeadCell>Product Name</HeadCell>\n                <HeadCell>Product Price</HeadCell>\n                <HeadCell>Product Desc</HeadCell>\n                <HeadCell>Product Image</HeadCell>\n                <HeadCell>Manage Product</HeadCell>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.products.map((product, index) => {\n                return (\n                  <tr key={product.id}>\n                    <BodyCell>{index + 1}</BodyCell>\n                    <BodyCell>{product.name}</BodyCell>\n                    <BodyCell>{product.price}</BodyCell>\n                    <DescColumn>{product.desc}</DescColumn>\n                    <BodyCell>\n                      <ProductImg src={product.image} />\n                    </BodyCell>\n                    <BodyCell>\n                      <IconImg\n                        src={EditIcon}\n                        onClick={() => {\n                          this.openEditModal(product);\n                        }}\n                      />\n                      <IconImg\n                        src={DeleteIcon}\n                        onClick={this.openConfirmModal}\n                      />\n                      {this.state.openConfirm ? (\n                        <ModalConfirmation\n                          open={this.state.openConfirm}\n                          onClose={this.closeConfirmModal}\n                          product={product}\n                          onDelete={product => this.onDeleteProduct(product)}\n                        />\n                      ) : (\n                        \"\"\n                      )}\n                    </BodyCell>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n        </TableWrapper>\n        {this.state.open ? (\n          <AddProduct\n            open={this.state.open}\n            item={this.state.item}\n            onClose={this.closeModal}\n            onSubmit={newItem => this.handleSubmit(newItem)}\n            callbackFromParent={this.myCallback}\n          />\n        ) : (\n          \"\"\n        )}\n      </Wrapper>\n    );\n  }\n}\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nconst Title = styled.h1`\n  text-align: center;\n`;\n\nconst AddButton = styled.button`\n  width: 130px;\n  padding: 7px 5px;\n  text-align: center;\n  font-size: 14px;\n  border: none;\n  border-radius: 5px;\n  color: white;\n  cursor: pointer;\n  background: #484848;\n  margin: 0 20px;\n  &:hover {\n    background: #888888;\n  }\n`;\n\nconst TableWrapper = styled.div`\n  max-height: 658px;\n  overflow-y: auto;\n`;\nconst Table = styled.table`\n  margin: 20px auto;\n  border-collapse: collapse;\n`;\n\nconst HeadCell = styled.th`\n  padding: 5px;\n  text-align: center;\n  border: 1px solid black;\n  border-collapse: collapse;\n`;\nconst BodyCell = styled.td`\n  padding: 5px;\n  text-align: left;\n  border: 1px solid black;\n`;\nconst DescColumn = styled(BodyCell)`\n  width: 550px;\n`;\nconst ProductImg = styled.img`\n  width: 100px;\n  height: 100px;\n`;\n\nconst IconImg = styled.img`\n  display: block;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  margin: 10px auto;\n`;\n"]},"metadata":{},"sourceType":"module"}